<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    
    
    <title>HugoBOT | Tu Asistente Virtual de Productividad</title>
    <meta name="description" content="Optimiza tu emprendimiento con HugoBOT. Consultor√≠as, formaci√≥n en Google Sheets y automatizaci√≥n de procesos para freelancers y equipos.">
    <meta name="keywords" content="HugoBOT, Google Sheets, Automatizaci√≥n, Emprendedores, Productividad, Consultor√≠a Digital">
    <link rel="canonical" href="https://hugo85ar.github.io/HugoBot/">

    <meta property="og:type" content="website">
    <meta property="og:title" content="HugoBOT - Tu Asistente Virtual de Productividad">
    <meta property="og:description" content="¬øSent√≠s que te faltan procesos o gesti√≥n? HugoBOT te ayuda a optimizar tu negocio en segundos.">
    <meta property="og:image" content="https://res.cloudinary.com/dlnrsadbc/image/upload/v1770301307/HugoBot_xkcs39.png">
    <meta property="og:url" content="https://hugo85ar.github.io/HugoBot/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="HugoBOT | Tu Asistente Virtual">
    <meta name="twitter:image" content="https://res.cloudinary.com/dlnrsadbc/image/upload/v1770301307/HugoBot_xkcs39.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <style>
        /* Mantenemos tu CSS que est√° excelente */
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #1a1f36; font-family: sans-serif; }
        .bot-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://res.cloudinary.com/dlnrsadbc/image/upload/v1767020899/FOTO_LOGIN_PLATAFORMA_ok3et0.avif') center center no-repeat; background-size: cover; filter: blur(6px) brightness(0.6); z-index: 1; transform: scale(1.05); }
        #chat-container { display: flex; flex-direction: column; background: #ffffff; position: fixed; z-index: 1000; top: 0; left: 0; width: 100vw; height: 100vh; }
        @media (min-width: 601px) { #chat-container { width: 480px; height: 85vh; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 20px; box-shadow: 0 30px 60px rgba(0,0,0,0.7); } }
        header { background: linear-gradient(135deg, #1e3c72 0%, #1a1f36 100%); color: white; padding: 15px 10px; text-align: center; border-bottom: 3px solid #30D5C8; }
        header img { width: 70px; height: 70px; border-radius: 50%; border: 3px solid white; object-fit: cover; display: block; margin: 0 auto 8px; }
        #messages { flex: 1; overflow-y: auto; padding: 20px; background: #ffffff; }
        .text { padding: 12px 16px; border-radius: 18px; font-size: 15px; margin-bottom: 5px; max-width: 85%; }
        .bot-message .text { background: #f1f3f6; color: #333; align-self: flex-start; }
        .user-message .text { background: #1e3c72; color: white; align-self: flex-end; }
        #input-area { display: flex; padding: 15px; border-top: 1px solid #eee; background: white; }
        #input-area input { flex: 1; border: 1px solid #ddd; border-radius: 25px; padding: 12px 20px; font-size: 16px; outline: none; }
        #input-area button { background: #1e3c72; color: white; border: none; border-radius: 50%; width: 45px; height: 45px; margin-left: 10px; cursor: pointer; }
        .contact-human-btn { display: flex; align-items: center; justify-content: center; width: 100%; padding: 15px; background-color: #25D366; color: white; text-align: center; border-radius: 12px; text-decoration: none; font-weight: bold; }
        .back-to-chat-btn { display: block; width: 100%; margin-top: 10px; padding: 12px; background-color: #f8f9fa; color: #1e3c72; border: 2px solid #1e3c72; border-radius: 25px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="bot-background"></div>

    <main id="chat-container">
        <header>
            <img src="https://res.cloudinary.com/dlnrsadbc/image/upload/v1770301307/HugoBot_xkcs39.png" 
           
         alt="HugoBOT Logo" 
         width="70" 
         height="70" 
         fetchpriority="high"> <div style="font-weight:bold; font-size:1.2em;">HugoBOT - Tu Asistente Virtual</div>
        </header>

        <div id="messages" role="log" aria-live="polite"></div>
        
        <div id="options-container" style="padding:10px; display:flex; flex-wrap:wrap; gap:8px; justify-content:center;"></div>
        
        <div id="input-area">
            <input id="input" type="text" placeholder="Escribe aqu√≠..." onkeypress="handleKeyPress(event)" aria-label="Escribe tu mensaje">
            <button onclick="sendMessage(null, true)" aria-label="Enviar">‚Ä∫</button>
        </div>
    </main>

<script>
    const WEB_APP_URL_BASE = "https://script.google.com/macros/s/AKfycbyKFpYuHEOXpZawzoqy_YMDWzxqLfVGcSbgUlXJ63O-5pAnTFnyNeERk_kpOI8XwTW8oA/exec";

   function addMessage(sender, data) {
    const div = document.getElementById('messages');
    const isBot = sender === 'Bot';
    let html = '<div style="margin-bottom:15px; display:flex; flex-direction:column; align-items: ' + (isBot ? 'flex-start' : 'flex-end') + ';">';
    
    // CORRECCI√ìN ACCESIBILIDAD: Gris m√°s oscuro (#57606f) para contraste
    html += '<div style="font-weight:bold; font-size:0.7em; color:#57606f; margin-bottom:2px;">' + sender + '</div>';
    html += '<div class="text ' + (isBot ? 'bot-message' : 'user-message') + '">';

    if (isBot) {
        if (data.image_url) {
            let optimizedUrl = data.image_url;
            if (optimizedUrl.includes('cloudinary.com')) {
                // CORRECCI√ìN RESOLUCI√ìN: Subimos a w_500 para nitidez en m√≥viles
                optimizedUrl = optimizedUrl.replace('/upload/', '/upload/w_500,q_auto,f_auto/');
            }
            // CORRECCI√ìN RENDIMIENTO: A√±adimos width y height fijos
            html += '<img src="' + optimizedUrl + '" alt="HugoBOT info" width="350" height="250" style="width:100%; height:auto; border-radius:10px; margin-bottom:10px; display:block;">';
        }
        let content = data.content || '';
        html += content.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
        if (data.url) {
            html += '<div style="margin-top:10px;"><a href="' + data.url + '" target="_blank" style="display:block; background:#30D5C8; color:white; padding:10px; border-radius:10px; text-decoration:none; text-align:center; font-weight:bold;">üîó Ir al enlace</a></div>';
        }
    } else {
        html += data;
    }

    html += '</div></div>';
    div.innerHTML += html;
    div.scrollTop = div.scrollHeight;
}

    window.handleServerResponse = function(response) {
        const inputArea = document.getElementById('input-area');
        document.getElementById('options-container').innerHTML = '';
        addMessage('Bot', response);
        if (response.options) updateOptions(response.options);
        if (response.whatsapp_url) {
            inputArea.style.display = 'block';
            inputArea.innerHTML = `<a href="${response.whatsapp_url}" target="_blank" class="contact-human-btn">üìû Conversar con un Asesor</a>
                                   <button onclick="resetInput()" class="back-to-chat-btn">‚Ü©Ô∏è Volver al chat</button>`;
        } else {
            resetInput();
        }
    };

    function resetInput() {
        const inputArea = document.getElementById('input-area');
        inputArea.style.display = 'flex';
        inputArea.innerHTML = `<input id="input" type="text" placeholder="Escribe aqu√≠..." onkeypress="handleKeyPress(event)">
                               <button onclick="sendMessage(null, true)">‚Ä∫</button>`;
    }

    function sendMessage(msg = null, isManual = false) {
        const text = msg || document.getElementById('input').value.trim();
        if (!text) return;
        addMessage('T√∫', text);
        if (isManual) document.getElementById('input').value = '';
        document.getElementById('options-container').innerHTML = '<div style="color:#999; font-size:0.8em;">Hugo est√° buscando...</div>';
        const script = document.createElement('script');
        script.src = `${WEB_APP_URL_BASE}?message=${encodeURIComponent(text)}&callback=handleServerResponse&t=${new Date().getTime()}`;
        document.head.appendChild(script);
    }

    function updateOptions(options) {
        const container = document.getElementById('options-container');
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.style = "background:white; border:2px solid #1e3c72; color:#1e3c72; padding:8px 14px; border-radius:20px; font-weight:bold; cursor:pointer;";
            btn.textContent = opt;
            btn.onclick = () => sendMessage(opt);
            container.appendChild(btn);
        });
    }

    function handleKeyPress(e) { if (e.key === 'Enter') sendMessage(null, true); }

    window.onload = function() {
        addMessage('Bot', {content: 'HugoBOT se est√° conectando... ‚ú®'});
        const script = document.createElement('script');
        script.src = `${WEB_APP_URL_BASE}?initial=true&callback=handleServerResponse`;
        document.head.appendChild(script);
    };
</script>
</body>
</html>
